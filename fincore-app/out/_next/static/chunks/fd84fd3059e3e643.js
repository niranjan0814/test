(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";let s=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>s],37727)},87316,e=>{"use strict";let s=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],87316)},658,e=>{"use strict";var s=e.i(64397);let t={credentials:"include"};async function a(e){let s=e.headers.get("content-type")?.includes("application/json")?await e.json():null;if(!e.ok){if(s&&(422===e.status||409===e.status)){let e=Error(s.message||"Validation failed");throw e.errors=s.errors,e}let t=s&&s.message||e.statusText;throw Error(`API Error ${e.status}: ${t}`)}return s.data}e.s(["centerService",0,{getCenters:async()=>a(await fetch(`${s.API_BASE_URL}/centers`,{...t,headers:(0,s.getHeaders)()})),getCenterById:async e=>a(await fetch(`${s.API_BASE_URL}/centers/${e}`,{...t,headers:(0,s.getHeaders)()})),createCenter:async e=>a(await fetch(`${s.API_BASE_URL}/centers`,{method:"POST",...t,headers:(0,s.getHeaders)(),body:JSON.stringify(e)})),updateCenter:async(e,r)=>a(await fetch(`${s.API_BASE_URL}/centers/${e}`,{method:"PUT",...t,headers:(0,s.getHeaders)(),body:JSON.stringify(r)})),deleteCenter:async e=>{let a=await fetch(`${s.API_BASE_URL}/centers/${e}`,{method:"DELETE",...t,headers:(0,s.getHeaders)()});if(!a.ok){let e=a.headers.get("content-type")?.includes("application/json")?await a.json():null,s=e&&e.message||a.statusText;throw Error(`Delete failed ${a.status}: ${s}`)}}}])},13477,e=>{"use strict";let s=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api",t=()=>{let e="undefined"!=typeof localStorage?localStorage.getItem("token"):null,s=(e=>{if("undefined"==typeof document)return null;let s=`; ${document.cookie}`.split(`; ${e}=`);return 2===s.length?s.pop()?.split(";").shift():null})("XSRF-TOKEN");return{Accept:"application/json","Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{},...s?{"X-XSRF-TOKEN":decodeURIComponent(s)}:{}}},a={credentials:"include"};e.s(["branchService",0,{getBranches:async()=>{let e=await fetch(`${s}/branches`,{...a,headers:t()});if(!e.ok)throw Error(`Failed to fetch branches: ${e.statusText}`);return(await e.json()).data},getBranchById:async e=>{let r=await fetch(`${s}/branches/${e}`,{...a,headers:t()});if(!r.ok)throw Error("Failed to fetch branch details");return(await r.json()).data},createBranch:async e=>{let r=await fetch(`${s}/branches`,{method:"POST",...a,headers:t(),body:JSON.stringify(e)}),l=await r.json();if(!r.ok){if(422===r.status||409===r.status){let e=Error(l.message||"Validation failed");throw e.errors=l.errors,e}throw Error(l.message||"Failed to create branch")}return l.data},updateBranch:async(e,r)=>{let l=await fetch(`${s}/branches/${e}`,{method:"PUT",...a,headers:t(),body:JSON.stringify(r)}),n=await l.json();if(!l.ok){if(422===l.status||409===l.status){let e=Error(n.message||"Validation failed");throw e.errors=n.errors,e}throw Error(n.message||"Failed to update branch")}return n.data},deleteBranch:async e=>{let r=await fetch(`${s}/branches/${e}`,{method:"DELETE",...a,headers:t()});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"Failed to delete branch")}}])},3116,e=>{"use strict";let s=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],3116)},23558,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(87316),r=e.i(3116),l=e.i(61911),n=e.i(37727),i=e.i(658),d=e.i(13477),c=e.i(64397);function o(){let[e,o]=(0,t.useState)([]),[m,x]=(0,t.useState)(!0),[h,u]=(0,t.useState)(null),[g,p]=(0,t.useState)(""),[f,y]=(0,t.useState)(""),[b,j]=(0,t.useState)(!1),[N,v]=(0,t.useState)(null),[w,S]=(0,t.useState)(()=>{{let e=localStorage.getItem("temporaryAssignments");return e?JSON.parse(e):[]}}),[k,_]=(0,t.useState)({temporaryUser:"",date:"",reason:""}),[C,U]=(0,t.useState)([]),[A,E]=(0,t.useState)([]);(0,t.useEffect)(()=>{$()},[]);let $=async()=>{try{x(!0);let[e,s,t]=await Promise.all([i.centerService.getCenters(),d.branchService.getBranches(),fetch(`${c.API_BASE_URL}/staffs/by-role/field_officer`,{headers:(0,c.getHeaders)(),credentials:"include"}).then(e=>e.ok?e.json():{data:[]})]);o(e||[]),U(s||[]),t?.data&&Array.isArray(t.data)?E(t.data):Array.isArray(t)?E(t):E([])}catch(e){console.error("Error loading meeting scheduling data:",e),u(e.message||"Failed to load data")}finally{x(!1)}},T=e.filter(e=>(!g||e.branch_id===g)&&(!f||!e.allowedStaff||!!e.allowedStaff.includes(f)));return m?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):h?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-red-600",children:[(0,s.jsx)("p",{children:h}),(0,s.jsx)("button",{onClick:$,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Retry"})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"View Meeting Scheduling"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage temporary user assignments for center meetings"})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Branch"}),(0,s.jsxs)("select",{value:g,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"All Branches"}),C.map(e=>(0,s.jsx)("option",{value:e.id,children:e.branch_name},e.id))]})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"User"}),(0,s.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"All Users"}),A.map(e=>(0,s.jsx)("option",{value:e.staff_id,children:e.full_name},e.staff_id))]})]})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(e=>(0,s.jsxs)("div",{onClick:()=>{v(e),_({temporaryUser:"",date:new Date().toISOString().split("T")[0],reason:""}),j(!0)},className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(l.Users,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${"active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.status.toUpperCase()})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.center_name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.CSU_id})]}),(0,s.jsxs)("div",{className:"mt-4 border-t border-gray-100 pt-3",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wider",children:"Schedule"}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[e.open_days?.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,s.jsx)(a.Calendar,{className:"w-3.5 h-3.5 text-gray-400"}),(0,s.jsx)("span",{children:e.day})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(r.Clock,{className:"w-3.5 h-3.5 text-gray-400"}),(0,s.jsx)("span",{children:e.time})]})]},t)),(!e.open_days||0===e.open_days.length)&&(0,s.jsx)("p",{className:"text-sm text-gray-400 italic",children:"No schedule set"})]})]}),(0,s.jsx)("div",{className:"pt-2 border-t border-gray-100",children:(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.group_count||0}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Groups"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.totalMembers||0}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Members"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:e.totalLoans||0}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Loans"})]})]})})]})]},e.id))}),b&&N&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full shadow-xl",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Temporary User Assignment"}),(0,s.jsx)("button",{onClick:()=>j(!1),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:(0,s.jsx)(n.X,{className:"w-5 h-5 text-gray-500"})})]})}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Center Name"}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:N.center_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Center Time"}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:N.open_days?.map(e=>`${e.time} (${e.day})`).join(", ")||"No schedule"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Center User"}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:N.staff_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Center Location"}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:N.address})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temporary User *"}),(0,s.jsxs)("select",{value:k.temporaryUser,onChange:e=>_({...k,temporaryUser:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select User"}),A.map(e=>(0,s.jsx)("option",{value:e.full_name,children:e.full_name},e.staff_id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,s.jsx)("input",{type:"date",value:k.date,onChange:e=>_({...k,date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),(0,s.jsx)("textarea",{value:k.reason,onChange:e=>_({...k,reason:e.target.value}),rows:3,placeholder:"Reason for temporary assignment (e.g., original user on leave)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]})]}),(0,s.jsxs)("div",{className:"p-4 border-t border-gray-200 flex gap-3 justify-end bg-gray-50",children:[(0,s.jsx)("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-white transition-colors font-medium text-sm",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{if(N&&k.temporaryUser){let e=[...w,{centerId:N.id,originalUser:N.staff_id,temporaryUser:k.temporaryUser,date:k.date,reason:k.reason}];S(e),localStorage.setItem("temporaryAssignments",JSON.stringify(e)),j(!1)}},disabled:!k.temporaryUser||!k.date,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm",children:"Assign User"})]})]})}),w.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Temporary Assignments"}),(0,s.jsx)("div",{className:"space-y-3",children:w.slice(-5).map((t,a)=>{let r=e.find(e=>e.id===t.centerId);return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:r?.center_name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[t.originalUser," â†’ ",t.temporaryUser," on ",t.date]})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:t.reason})]},a)})})]})]})}function m(){return(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(o,{})})}e.s(["default",()=>m],23558)}]);