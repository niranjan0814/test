(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";let s=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>s],37727)},7233,e=>{"use strict";let s=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},27612,e=>{"use strict";let s=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],27612)},31278,e=>{"use strict";let s=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},658,e=>{"use strict";var s=e.i(64397);let t={credentials:"include"};async function a(e){let s=e.headers.get("content-type")?.includes("application/json")?await e.json():null;if(!e.ok){if(s&&(422===e.status||409===e.status)){let e=Error(s.message||"Validation failed");throw e.errors=s.errors,e}let t=s&&s.message||e.statusText;throw Error(`API Error ${e.status}: ${t}`)}return s.data}e.s(["centerService",0,{getCenters:async()=>a(await fetch(`${s.API_BASE_URL}/centers`,{...t,headers:(0,s.getHeaders)()})),getCenterById:async e=>a(await fetch(`${s.API_BASE_URL}/centers/${e}`,{...t,headers:(0,s.getHeaders)()})),createCenter:async e=>a(await fetch(`${s.API_BASE_URL}/centers`,{method:"POST",...t,headers:(0,s.getHeaders)(),body:JSON.stringify(e)})),updateCenter:async(e,r)=>a(await fetch(`${s.API_BASE_URL}/centers/${e}`,{method:"PUT",...t,headers:(0,s.getHeaders)(),body:JSON.stringify(r)})),deleteCenter:async e=>{let a=await fetch(`${s.API_BASE_URL}/centers/${e}`,{method:"DELETE",...t,headers:(0,s.getHeaders)()});if(!a.ok){let e=a.headers.get("content-type")?.includes("application/json")?await a.json():null,s=e&&e.message||a.statusText;throw Error(`Delete failed ${a.status}: ${s}`)}}}])},13130,4405,e=>{"use strict";var s=e.i(71645);function t({totalItems:e,initialItemsPerPage:t=10}){let[a,r]=(0,s.useState)(1),[l,n]=(0,s.useState)(t),i=Math.ceil(e/l),c=(a-1)*l;return(0,s.useEffect)(()=>{r(1)},[e]),{currentPage:a,itemsPerPage:l,totalPages:i,startIndex:c,endIndex:c+l,handlePageChange:e=>{r(e)},handleItemsPerPageChange:e=>{n(e),r(1)}}}e.s(["usePagination",()=>t],13130);var a=e.i(43476),r=e.i(73375),l=e.i(63059);function n({currentPage:e,totalItems:s,itemsPerPage:t,onPageChange:n,onItemsPerPageChange:i,itemName:c="items"}){let d=Math.ceil(s/t),o=(e-1)*t,u=Math.min(o+t,s),m=e=>{n(Math.max(1,Math.min(e,d)))};return 0===s?null:(0,a.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 px-6 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",(0,a.jsx)("span",{className:"font-medium",children:o+1})," to"," ",(0,a.jsx)("span",{className:"font-medium",children:u})," of"," ",(0,a.jsx)("span",{className:"font-medium",children:s})," ",c]}),(0,a.jsxs)("select",{value:t,onChange:e=>i(Number(e.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:5,children:"5 per page"}),(0,a.jsx)("option",{value:10,children:"10 per page"}),(0,a.jsx)("option",{value:20,children:"20 per page"}),(0,a.jsx)("option",{value:50,children:"50 per page"})]})]}),d>1&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>m(e-1),disabled:1===e,className:"p-1 border border-gray-300 rounded text-sm text-gray-700 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Previous page",children:(0,a.jsx)(r.ChevronLeft,{className:"w-4 h-4"})}),(0,a.jsx)("div",{className:"flex gap-1",children:(()=>{let s=[];if(d<=5)for(let e=1;e<=d;e++)s.push(e);else if(e<=3){for(let e=1;e<=4;e++)s.push(e);s.push("..."),s.push(d)}else if(e>=d-2){s.push(1),s.push("...");for(let e=d-3;e<=d;e++)s.push(e)}else{s.push(1),s.push("...");for(let t=e-1;t<=e+1;t++)s.push(t);s.push("..."),s.push(d)}return s.map((s,t)=>"..."===s?(0,a.jsx)("span",{className:"px-3 py-1 text-sm text-gray-700",children:"..."},`ellipsis-${t}`):(0,a.jsx)("button",{onClick:()=>m(s),className:`px-3 py-1 rounded text-sm transition-colors ${e===s?"bg-blue-600 text-white":"border border-gray-300 text-gray-700 hover:bg-white"}`,children:s},s))})()}),(0,a.jsx)("button",{onClick:()=>m(e+1),disabled:e===d,className:"p-1 border border-gray-300 rounded text-sm text-gray-700 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Next page",children:(0,a.jsx)(l.ChevronRight,{className:"w-4 h-4"})})]})]})})}e.s(["Pagination",()=>n],4405)},13477,e=>{"use strict";let s=e.i(47167).default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api",t=()=>{let e="undefined"!=typeof localStorage?localStorage.getItem("token"):null,s=(e=>{if("undefined"==typeof document)return null;let s=`; ${document.cookie}`.split(`; ${e}=`);return 2===s.length?s.pop()?.split(";").shift():null})("XSRF-TOKEN");return{Accept:"application/json","Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{},...s?{"X-XSRF-TOKEN":decodeURIComponent(s)}:{}}},a={credentials:"include"};e.s(["branchService",0,{getBranches:async()=>{let e=await fetch(`${s}/branches`,{...a,headers:t()});if(!e.ok)throw Error(`Failed to fetch branches: ${e.statusText}`);return(await e.json()).data},getBranchById:async e=>{let r=await fetch(`${s}/branches/${e}`,{...a,headers:t()});if(!r.ok)throw Error("Failed to fetch branch details");return(await r.json()).data},createBranch:async e=>{let r=await fetch(`${s}/branches`,{method:"POST",...a,headers:t(),body:JSON.stringify(e)}),l=await r.json();if(!r.ok){if(422===r.status||409===r.status){let e=Error(l.message||"Validation failed");throw e.errors=l.errors,e}throw Error(l.message||"Failed to create branch")}return l.data},updateBranch:async(e,r)=>{let l=await fetch(`${s}/branches/${e}`,{method:"PUT",...a,headers:t(),body:JSON.stringify(r)}),n=await l.json();if(!l.ok){if(422===l.status||409===l.status){let e=Error(n.message||"Validation failed");throw e.errors=n.errors,e}throw Error(n.message||"Failed to update branch")}return n.data},deleteBranch:async e=>{let r=await fetch(`${s}/branches/${e}`,{method:"DELETE",...a,headers:t()});if(!r.ok)throw Error((await r.json().catch(()=>({}))).message||"Failed to delete branch")}}])},78894,e=>{"use strict";let s=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],78894)},99655,e=>{"use strict";e.s(["colors",0,{primary:{600:"#2563eb",700:"#1d4ed8",50:"#eff6ff",100:"#dbeafe"},success:{100:"#dcfce7",600:"#16a34a",700:"#15803d"},danger:{50:"#fef2f2",600:"#dc2626"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",900:"#111827"},white:"#ffffff",black:"#000000",transparent:"transparent"}])},46523,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(55436),r=e.i(7233),l=e.i(61911),n=e.i(13477),i=e.i(64397),c=e.i(37727),d=e.i(27612),o=e.i(31278);function u({isOpen:e,onClose:a,onSubmit:l,initialData:u}){let[m,x]=(0,t.useState)([]),[h,g]=(0,t.useState)([]),[p,f]=(0,t.useState)([]),[b,y]=(0,t.useState)(!1),[j,N]=(0,t.useState)("");(0,t.useEffect)(()=>{let e=localStorage.getItem("roles");if(e)try{let s=JSON.parse(e);if(Array.isArray(s)&&s.length>0){let e=s.map(e=>e.name);e.includes("field_officer")?N("field_officer"):e.includes("super_admin")?N("super_admin"):e.includes("admin")?N("admin"):N(e[0])}}catch(e){console.error("Error parsing roles",e)}},[]),(0,t.useEffect)(()=>{let s=localStorage.getItem("roles");if(s)try{let e=JSON.parse(s);if(Array.isArray(e)&&e.length>0){let s=e.map(e=>e.name);s.includes("field_officer")?N("field_officer"):s.includes("super_admin")?N("super_admin"):s.includes("admin")?N("admin"):N(s[0])}}catch(e){console.error("Error parsing roles",e)}(async()=>{if(e){y(!0);try{let[e,s]=await Promise.all([n.branchService.getBranches(),fetch(`${i.API_BASE_URL}/staffs/by-role/field_officer`,{headers:(0,i.getHeaders)()}).then(e=>e.json())]);g(e||[]),s?.data?f(s.data):Array.isArray(s)&&f(s)}catch(e){console.error("Failed to load form data:",e)}finally{y(!1)}}})()},[e]),(0,t.useEffect)(()=>{e&&(u?x(u.open_days||[]):x([]))},[e,u]);let v=(e,s,t)=>{let a=[...m];if("date"===s){let r=new Date(t).toLocaleDateString("en-US",{weekday:"long"});a[e]={...a[e],[s]:t,day:r}}else a[e]={...a[e],[s]:t};x(a)};return e?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white px-6 py-4 border-b border-gray-100 flex items-center justify-between z-10",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:u?"Edit Center":"Create New Center"}),(0,s.jsx)("button",{onClick:a,className:"p-1 hover:bg-gray-100 rounded-full transition-colors text-gray-500",children:(0,s.jsx)(c.X,{size:24})})]}),b?(0,s.jsxs)("div",{className:"p-20 flex flex-col items-center justify-center space-y-4",children:[(0,s.jsx)(o.Loader2,{size:40,className:"animate-spin text-blue-600"}),(0,s.jsx)("p",{className:"text-gray-500 font-medium",children:"Loading form details..."})]}):(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=new FormData(e.currentTarget);l({CSU_id:s.get("CSU_id"),center_name:s.get("center_name"),branch_id:s.get("branch_id"),staff_id:s.get("contactPerson")||null,address:s.get("address"),location:s.get("locationType"),status:s.get("status")||"active",open_days:m,meetingTime:m.length>0?m[0].time:void 0})},className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Center Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"center_name",required:!0,defaultValue:u?.center_name,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter center name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Branch ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{name:"branch_id",required:!0,defaultValue:u?.branch_id,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white",children:[(0,s.jsx)("option",{value:"",children:"Select Branch"}),h.map(e=>(0,s.jsx)("option",{value:e.id,children:e.branch_name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Location Type ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{type:"text",name:"locationType",required:!0,defaultValue:u?.location,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"e.g. Urban, Rural"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Address ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("textarea",{name:"address",required:!0,defaultValue:u?.address,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",placeholder:"Full address of the center"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["field_officer"!==j&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Field Officer ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{name:"contactPerson",defaultValue:u?.staff_id||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Officer"}),p.map(e=>(0,s.jsx)("option",{value:e.staff_id,children:e.full_name},e.staff_id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{name:"status",defaultValue:u?.status||"active",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white",children:[(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Meeting Schedules"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{x([...m,{day:"",date:new Date().toISOString().split("T")[0],time:"10:00"}])},className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1 hover:bg-blue-50 px-2 py-1 rounded transition-colors",children:[(0,s.jsx)(r.Plus,{size:16})," Add Schedule"]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[m.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center animate-in fade-in slide-in-from-top-1 duration-200 bg-white p-3 rounded-lg border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex-1 w-full sm:w-auto",children:[(0,s.jsx)("label",{className:"block text-[10px] uppercase font-bold text-gray-400 mb-1",children:"Meeting Date"}),(0,s.jsx)("input",{type:"date",value:e.date||"",onChange:e=>v(t,"date",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,s.jsxs)("div",{className:"w-full sm:w-32",children:[(0,s.jsx)("label",{className:"block text-[10px] uppercase font-bold text-gray-400 mb-1",children:"Day"}),(0,s.jsx)("input",{type:"text",value:e.day,readOnly:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-500 outline-none font-medium cursor-default"})]}),(0,s.jsxs)("div",{className:"w-full sm:w-32",children:[(0,s.jsx)("label",{className:"block text-[10px] uppercase font-bold text-gray-400 mb-1",children:"Time"}),(0,s.jsx)("input",{type:"time",value:e.time,onChange:e=>v(t,"time",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),(0,s.jsx)("div",{className:"pt-5 sm:pt-0",children:(0,s.jsx)("button",{type:"button",onClick:()=>{x(m.filter((e,s)=>s!==t))},className:"text-gray-400 hover:text-red-500 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Remove schedule",children:(0,s.jsx)(d.Trash2,{size:18})})})]},t)),0===m.length&&(0,s.jsx)("div",{className:"text-center py-4 text-gray-500 text-sm italic bg-white rounded border border-dashed border-gray-300",children:"No meeting schedules configured"})]})]}),(0,s.jsxs)("div",{className:"sticky bottom-0 bg-white pt-4 border-t border-gray-100 flex gap-3 justify-end",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium text-sm transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm transition-colors flex items-center gap-2",children:u?"Update Center":"Create Center"})]})]})]})}):null}var m=e.i(84614),x=e.i(78894),h=e.i(99655),g=e.i(13130),p=e.i(4405);function f({centers:e,totalCenters:t,getTemporaryAssignment:a,onEdit:r,onViewSchedule:n}){let{currentPage:i,itemsPerPage:c,startIndex:d,endIndex:o,handlePageChange:u,handleItemsPerPageChange:f}=(0,g.usePagination)({totalItems:e.length}),b=e.slice(d,o);return(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 px-6 py-3",children:(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 text-xs font-semibold text-gray-600 uppercase",children:[(0,s.jsx)("div",{className:"col-span-2",children:"Center"}),(0,s.jsx)("div",{className:"col-span-2",children:"Branch"}),(0,s.jsx)("div",{className:"col-span-2",children:"Meeting Schedule"}),(0,s.jsx)("div",{className:"col-span-2 text-center",children:"Assigned User"}),(0,s.jsx)("div",{className:"col-span-1 text-center",children:"Location"}),(0,s.jsx)("div",{className:"col-span-1 text-center",children:"Status"}),(0,s.jsx)("div",{className:"col-span-2 text-right",children:"Actions"})]})}),(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:0===b.length?(0,s.jsx)("div",{className:"px-6 py-8 text-center text-gray-500 text-sm",children:"No centers found."}):b.map(e=>{let t=a(e.id);return(0,s.jsxs)("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,s.jsxs)("div",{className:"col-span-2 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:h.colors.primary[50]},children:(0,s.jsx)(l.Users,{className:"w-5 h-5",style:{color:h.colors.primary[600]}})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.center_name}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.CSU_id})]})]}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("p",{className:"text-sm text-gray-900",children:e.branch?.branch_name||e.branch_id})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("div",{className:"space-y-1",children:e.open_days?.map((e,t)=>(0,s.jsxs)("div",{className:"flex flex-col text-xs",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:e.day}),(0,s.jsx)("span",{className:"text-gray-500",children:e.time})]}),e.date&&(0,s.jsx)("span",{className:"text-[10px] text-gray-400 font-mono",children:e.date})]},t))})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center",children:(0,s.jsx)(m.User,{className:"w-3 h-3 text-gray-600"})}),(0,s.jsx)("div",{className:"min-w-0",children:(0,s.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate",children:e.staff?.full_name||e.staff_id||"Unassigned"})})]})}),(0,s.jsx)("div",{className:"col-span-1 text-center",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${"Urban"===e.location?"bg-blue-100 text-blue-800":"Rural"===e.location?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:e.location})}),(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)("div",{className:"flex flex-col items-center gap-1",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full capitalize ${"active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.status})})}),(0,s.jsx)("div",{className:"col-span-2 flex justify-end gap-2",children:(0,s.jsx)("button",{onClick:()=>r(e.id),className:"p-1 px-2 text-xs font-medium text-gray-600 hover:bg-gray-100 rounded transition-colors",children:"Edit"})})]}),t&&(0,s.jsx)("div",{className:"col-span-12 mt-3 bg-orange-50 border border-orange-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(x.AlertTriangle,{className:"w-5 h-5 text-orange-600 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-orange-900",children:"Temporary Assignment Active"}),(0,s.jsxs)("p",{className:"text-sm text-orange-800",children:[t.originalUser," is unavailable. ",t.temporaryUser," assigned for ",t.date,"."]}),t.reason&&(0,s.jsxs)("p",{className:"text-xs text-orange-700 mt-1",children:["Reason: ",t.reason]})]})]})})]},e.id)})}),(0,s.jsx)(p.Pagination,{currentPage:i,totalItems:e.length,itemsPerPage:c,onPageChange:u,onItemsPerPageChange:f,itemName:"centers"})]})}var b=e.i(658),y=e.i(70319);function j(){let[e,n]=(0,t.useState)([]),[i,c]=(0,t.useState)(!0),[d,o]=(0,t.useState)(null);(0,t.useEffect)(()=>{m()},[]);let m=async()=>{try{c(!0);let e=await b.centerService.getCenters();n(e)}catch(e){console.error("Failed to load centers:",e),o(e.message||"Failed to load centers. Please check your connection.")}finally{c(!1)}},[x,h]=(0,t.useState)(!1),[g,p]=(0,t.useState)(null),j=async s=>{try{if(g){let t=await b.centerService.updateCenter(g.id,s);n(e.map(e=>e.id===t.id?t:e)),y.toast.success("Center updated successfully!")}else{let t=await b.centerService.createCenter(s);n([...e,t]),y.toast.success("Center created successfully!")}h(!1),p(null)}catch(s){console.error("Failed to save center:",s);let e=s.errors?Object.values(s.errors).flat().join(", "):s.message||"Failed to save center";y.toast.error(e)}},[N]=(0,t.useState)(()=>{{let e=localStorage.getItem("temporaryAssignments");return e?JSON.parse(e):[]}}),[v,w]=(0,t.useState)(""),[S,C]=(0,t.useState)(""),_=e.filter(e=>{let s=e.center_name.toLowerCase().includes(v.toLowerCase())||e.CSU_id.toLowerCase().includes(v.toLowerCase())||String(e.branch_id).toLowerCase().includes(v.toLowerCase()),t=!S||e.open_days&&e.open_days.some(e=>e.day===S);return s&&t});return i?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):d?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-red-600",children:[(0,s.jsx)("p",{children:d}),(0,s.jsx)("button",{onClick:m,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:"Retry"})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Center Scheduling"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage center meeting schedules"})]}),(0,s.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm",children:[(0,s.jsx)(r.Plus,{className:"w-4 h-4"}),"Create Center"]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsx)("div",{className:"flex-1 min-w-[300px]",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(a.Search,{className:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"}),(0,s.jsx)("input",{type:"text",placeholder:"Search centers by name, number, or branch...",value:v,onChange:e=>w(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,s.jsx)("div",{className:"min-w-[200px]",children:(0,s.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"All Days"}),["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})})]})}),(0,s.jsx)(f,{centers:_,totalCenters:e.length,getTemporaryAssignment:e=>{let s=new Date().toISOString().split("T")[0];return N.find(t=>t.centerId===e&&t.date===s)},onEdit:s=>{let t=e.find(e=>e.id===s);t&&(p(t),h(!0))},onViewSchedule:e=>console.log("View schedule:",e)}),0===_.length&&(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:[(0,s.jsx)(l.Users,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No centers found"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]}),(0,s.jsx)(u,{isOpen:x,onClose:()=>{h(!1),p(null)},initialData:g,onSubmit:j})]})}function N(){return(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)(j,{})})}e.s(["default",()=>N],46523)}]);